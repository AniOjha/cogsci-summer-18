<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Alcoholic</title>
	<script type="text/javascript" src="paper.js"></script>
	<script type="text/javascript" src="emonewGod.js"></script>
	<script type="text/javascript">
		paper.install(window);
		window.onload = function() {
		paper.setup('canvas');

		var grid = new Array(view.size.width);
		for (var i = 0; i < view.size.width; i++) {
  		grid[i] = new Array(view.size.height);
		}
		for (var i = 0; i < view.size.width; i++) {
			for (var j = 0; j < view.size.height; j++) {
				grid[i][j] = null;
			}
		}


    var RAD = 15;
		var WIDTH = view.size.width;
		var HEIGHT = view.size.height;

		var hero = new Person(true,new Point(view.center.x-150, view.center.y-100),3,8,20,new Path.Circle({
			center : view.center,
			radius : RAD,
			fillColor : 'red'
		}));

		var obstacle = new Person(true,new Point(view.center.x, view.center.y+50),3,6,20,new Path.Circle({
			center : view.center,
			radius : RAD,
			fillColor : 'black'
		}));

    var target = new Person(true,new Point(view.center.x + 300, view.center.y-100),0.1,2,20,new Path.Circle({
			center : view.center,
			radius : RAD,
			fillColor : 'blue'
		}));

    var ptarget = new Person(true,new Point(view.center.x, view.center.y-200),0.1,2,20,new Path.Circle({
			center : view.center,
			radius : RAD/5,
			fillColor : 'blue'
		}));

    var pt = new Path.Circle({
      center : new Point(view.center.x, view.center.y-100),
			radius : RAD/8,
			fillColor : 'red'
    })

		var vars = {
			offset : 0,
      offset1 : 0,
			framecount : 0
		}

		function scene1(event) {
      console.log("In scene 1");
			if (vars.framecount === 0) {
				hero.clearPath();
        obstacle.clearPath();
			}
			vars.framecount++;
      obstacle.followandAvoidPerson1(ptarget, hero, event.delta);
      if (vars.offset1 != -1) {
				vars.offset1 = obstacle.moveAlongPath(vars.offset1,event.delta);
			}
      hero.followandAvoidPerson(target, obstacle, event.delta);
      if (vars.offset != -1) {
				vars.offset = hero.moveAlongPath(vars.offset,event.delta);
			}
		}
		var currentScene = scene1;
		view.onFrame = function(event) {


			currentScene(event);
		}
	}
	</script>
</head>
<body>
	<canvas id="canvas" width="960" height="960"></canvas>
</body>
</html>
