<html>
<head>
	<meta charset="utf-8">
	<title>Emotion Test</title>
	<script type="text/javascript" src="paper.js"></script>
	<script type="text/javascript" src="emotion_threeparam.js"></script>
	<script type="text/javascript">
		paper.install(window);
		window.onload = function() {
			paper.setup('canvas');
			var escapist = new Person(true,view.center,6,3,8,new Path.Circle({
				center : view.center,
				radius : 10,
				fillColor : 'red'
			}));
			var pursuer = new Person(true,view.center,6,8,8,new Path.Circle({
				center : view.center,
				radius : 10,
				fillColor : 'blue'
			}));
			pursuer.phys.position = new Point(view.size.width - 40,view.size.height - 40);
			pursuer.initFollow();
			escapist.initRetreat();
			var offsetp = 0;
			var offsete = 0;
			view.onFrame = function(event) {
				pursuer.followPerson(escapist);
				escapist.retreatFromPerson(pursuer,100);
				if (offsetp != -1) {
					offsetp = pursuer.moveAlongPath(offsetp,event.delta);
				}
				if (offsete != -1 && escapist.movement.path.length > 0) {
					offsete = escapist.moveAlongPath(offsete,event.delta);
				}
			}
		}
	</script>
</head>
<body>
	<canvas id="canvas" width="960" height="960"></canvas>
</body>
</html>
